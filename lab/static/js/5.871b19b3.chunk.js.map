{"version":3,"sources":["utils/axios.ts","pages/search-engine/index.tsx"],"names":["axios","defaults","baseURL","interceptors","response","use","data","error","Promise","reject","App","useState","keyword","setKeyword","baseData","setBaseData","searchRes","setSearchRes","inputRef","useRef","useEffect","a","get","current","focus","className","onClick","window","history","go","ArrowLeftOutlined","value","ref","placeholder","onChange","e","keys","Object","FuzzySearch","caseSensitive","search","onSearch","target","length","delay","map","i","key","url","location","href","title","subtitle","tagStr","bgColorReset","tags","split","tag","index","color","Math","floor","random","undefined","renderTags","description"],"mappings":"kRAEAA,IAAMC,SAASC,QAAU,6BACzBF,IAAMG,aAAaC,SAASC,KAC1B,SAAAD,GACE,OAAOA,EAASE,QAElB,SAAAC,GACE,OAAOC,QAAQC,OAAOF,MAIXP,QAAf,E,OCuGeU,UAjGC,WAAO,IAAD,EACUC,mBAAS,IADnB,mBACbC,EADa,KACJC,EADI,OAEYF,mBAAyB,IAFrC,mBAEbG,EAFa,KAEHC,EAFG,OAGcJ,mBAAyB,IAHvC,mBAGbK,EAHa,KAGFC,EAHE,KAIdC,EAAWC,iBAAc,MAE/BC,qBAAU,WACR,sBAAC,4BAAAC,EAAA,sEACoCrB,EAAMsB,IAAI,gBAD9C,OACOhB,EADP,OAECS,EAAYT,GAFb,0CAAD,KAIC,IAEHc,qBAAU,WACJF,EAASK,SACXL,EAASK,QAAQC,UAElB,IAsCH,OACE,yBAAKC,UAAU,2BACb,yBAAKA,UAAU,cAAcC,QANlB,WACbC,OAAOC,QAAQC,IAAI,KAMf,kBAACC,EAAA,EAAD,CAAmBL,UAAU,sBAC7B,0BAAMA,UAAU,sBAAhB,SAEF,yBAAKA,UAAU,uBACb,kBAAC,IAAD,CACEM,MAAOnB,EACPoB,IAAKd,EACLe,YAAY,cACZC,SAAU,SAAAC,GAAC,OA/CF,SAACvB,GAChB,IAAMwB,EAAOC,OAAOD,MAAa,OAARtB,QAAQ,IAARA,OAAA,EAAAA,EAAW,KAAM,IAIpCR,EAHW,IAAIgC,IAAYxB,EAAUsB,EAAM,CAC/CG,eAAe,IAEKC,OAAO5B,GAE7BC,EAAWD,GACXK,EAAaX,GAuCQmC,CAASN,EAAEO,OAAOX,WAGrC,yBAAKN,UAAU,wBACZb,KACW,OAATI,QAAS,IAATA,OAAA,EAAAA,EAAW2B,QACV,kBAAC,IAAD,CAAWC,MAAO,KACf5B,EAAU6B,KAAI,SAAAC,GAAC,OACd,yBACErB,UAAU,qBACVsB,IAAKD,EAAEE,IACPtB,QAAS,kBA9BTsB,EA8BsBF,EAAEE,SA7BtCrB,OAAOsB,SAASC,KAAhB,mCAAmDF,IADtC,IAACA,IAgCA,yBAAKvB,UAAU,6BAA6BqB,EAAEK,OAC7CL,EAAEM,UACD,yBAAK3B,UAAU,gCACZqB,EAAEM,UApDJ,SAACC,GAClB,IAAMC,EAAe,CAAC,UAAW,UAAW,UAAW,WACjDC,GAAa,OAANF,QAAM,IAANA,OAAA,EAAAA,EAAQG,MAAM,OAAQ,GAEnC,OAAOD,EAAKZ,OACV,yBAAKlB,UAAU,4BACZ8B,EAAKV,KAAI,SAACY,EAAKC,GAAN,OACR,kBAAC,IAAD,CAAKX,IAAKW,EAAOC,MAAOL,EAAaM,KAAKC,MAAsB,EAAhBD,KAAKE,YAClDL,YAKPM,EA0CaC,CAAWlB,EAAES,WAKpB,kBAAC,IAAD,CAAOU,aAAa","file":"static/js/5.871b19b3.chunk.js","sourcesContent":["import axios from 'axios';\n\naxios.defaults.baseURL = 'https://kyuch4n.github.io/';\naxios.interceptors.response.use(\n  response => {\n    return response.data;\n  },\n  error => {\n    return Promise.reject(error);\n  },\n);\n\nexport default axios;\n","import React, { FC, useEffect, useRef, useState } from 'react';\nimport { Empty, Input, Tag } from 'antd';\nimport { ArrowLeftOutlined } from '@ant-design/icons';\nimport QueueAnim from 'rc-queue-anim';\nimport FuzzySearch from 'fuzzy-search';\nimport axios from '../../utils/axios';\nimport './index.scss';\n\ninterface BaseDataItem {\n  title: string;\n  subtitle: string;\n  description: string;\n  category: string;\n  tags: string;\n  date: string;\n  url: string;\n}\n\nconst App: FC = () => {\n  const [keyword, setKeyword] = useState('');\n  const [baseData, setBaseData] = useState<BaseDataItem[]>([]);\n  const [searchRes, setSearchRes] = useState<BaseDataItem[]>([]);\n  const inputRef = useRef<Input>(null);\n\n  useEffect(() => {\n    (async () => {\n      const data: BaseDataItem[] = await axios.get('/search.json');\n      setBaseData(data);\n    })();\n  }, []);\n\n  useEffect(() => {\n    if (inputRef.current) {\n      inputRef.current.focus();\n    }\n  }, []);\n\n  const onSearch = (keyword: string) => {\n    const keys = Object.keys(baseData?.[0] || {});\n    const searcher = new FuzzySearch(baseData, keys, {\n      caseSensitive: false,\n    });\n    const data = searcher.search(keyword);\n\n    setKeyword(keyword);\n    setSearchRes(data);\n  };\n\n  const renderTags = (tagStr: string) => {\n    const bgColorReset = ['#55acee', '#cd201f', '#3b5999', '#55acee'];\n    const tags = tagStr?.split(',') || [];\n\n    return tags.length ? (\n      <div className=\"search-result-item__tags\">\n        {tags.map((tag, index) => (\n          <Tag key={index} color={bgColorReset[Math.floor(Math.random() * 4)]}>\n            {tag}\n          </Tag>\n        ))}\n      </div>\n    ) : (\n      undefined\n    );\n  };\n\n  const linkTo = (url: string) => {\n    window.location.href = `https://kyuch4n.github.io${url}`;\n  };\n\n  const backTo = () => {\n    window.history.go(-1);\n  };\n\n  return (\n    <div className=\"search-engine-container\">\n      <div className=\"back-header\" onClick={backTo}>\n        <ArrowLeftOutlined className=\"back-header__icon\" />\n        <span className=\"back-header__title\">BACK</span>\n      </div>\n      <div className=\"search-engine-input\">\n        <Input\n          value={keyword}\n          ref={inputRef}\n          placeholder=\" $ grep ...\"\n          onChange={e => onSearch(e.target.value)}\n        />\n      </div>\n      <div className=\"search-engine-result\">\n        {keyword &&\n          (searchRes?.length ? (\n            <QueueAnim delay={300}>\n              {searchRes.map(i => (\n                <div\n                  className=\"search-result-item\"\n                  key={i.url}\n                  onClick={() => linkTo(i.url)}\n                >\n                  <div className=\"search-result-item__title\">{i.title}</div>\n                  {i.subtitle && (\n                    <div className=\"search-result-item__subtitle\">\n                      {i.subtitle}\n                    </div>\n                  )}\n                  {renderTags(i.tags)}\n                </div>\n              ))}\n            </QueueAnim>\n          ) : (\n            <Empty description={false} />\n          ))}\n      </div>\n    </div>\n  );\n};\n\nexport default App;\n"],"sourceRoot":""}